<% # Expects parent, commentable, isProject %>
<% 
    if commentableIsProject == "true"
        project= Project.find(commentable)
        commentable= project
    else
        commentable = ProjectEntry.find(commentable)
        project = commentable.project
        commentable_type = "Project"
    end
%>
<div id="<%= "comment_section_"+parent %>">
    <div class="d-flex flex-row ms-5 mb-1">
        <h1 class="text-primary">Comments</h1>
        <%= link_to "Collapse",
        section_reset_comment_path(parent: parent, commentable: commentable, commentableIsProject: commentableIsProject),
        data: { turbo_stream: true },
        class: "btn btn-primary ms-2"%>
    </div>
    <%= turbo_frame_tag dom_id(Comment.new), 
    src: new_comment_path(project_id: project.id, 
                        commentable_id: commentable.id, 
                        commentable_type: commentable.class), 
                        target:"_top" %>
    <%= render partial:"comments/comments" , locals: {parent: parent,commentable: commentable} %>
    <div class="d-flex flex-row justify-content-center">
            <%= link_to "Collapse",
            section_reset_comment_path(parent: parent, commentable: commentable, commentableIsProject: commentableIsProject),
            data: { turbo_stream: true },
            class: "btn btn-primary ms-2 mb-3 w-100"%>
    </div>
</div>